<!DOCTYPE html>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
<script>
'use strict';

window.onload = async function() {
  await test_driver.set_permission({name: 'compute-pressure'}, 'granted');

  let enabled = true;
  try {
    const observer = new PressureObserver(() => {});
    await observer.observe("cpu");
    observer.disconnect();
  } catch (e) {
    enabled = false;
  }
  parent.postMessage({ type: 'availability-result', enabled }, '*');
}
</script>
